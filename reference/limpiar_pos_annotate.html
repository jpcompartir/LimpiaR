<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Take a data frame with a text and id variable and extract its parts of speech using udpipe models which we import for a specific language with limpiar_pos_import_model. This function will annotate the data frame according to the language of the imported model."><title>Annotate Texts for Parts of Speech Analysis using udpipe models. — limpiar_pos_annotate • LimpiaR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Annotate Texts for Parts of Speech Analysis using udpipe models. — limpiar_pos_annotate"><meta property="og:description" content="Take a data frame with a text and id variable and extract its parts of speech using udpipe models which we import for a specific language with limpiar_pos_import_model. This function will annotate the data frame according to the language of the imported model."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">LimpiaR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/limpiar_intro.html">Introduction to LimpiaR</a>
    <a class="dropdown-item" href="../articles/parts_of_speech_workflow.html">LimpiaR - Parts of Speech Workflow</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jpcompartir/LimpiaR" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Annotate Texts for Parts of Speech Analysis using udpipe models.</h1>
      <small class="dont-index">Source: <a href="https://github.com/jpcompartir/LimpiaR/tree/mainR/limpiar_pos_annotate.R" class="external-link"><code>R/limpiar_pos_annotate.R</code></a></small>
      <div class="d-none name"><code>limpiar_pos_annotate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Take a data frame with a text and id variable and extract its parts of speech using udpipe models which we import for a specific language with <code>limpiar_pos_import_model</code>. This function will annotate the data frame according to the language of the imported model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">limpiar_pos_annotate</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">text_var</span>,</span>
<span>  <span class="va">id_var</span>,</span>
<span>  <span class="va">pos_model</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  in_parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dependency_parse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  update_progress <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>The data.frame or tibble object containing any texts that the user wishes to conduct parts of speech analysis on.</p></dd>


<dt>text_var</dt>
<dd><p>Any texts or sentences the user wishes to perform the parts of speech annotations on.</p></dd>


<dt>id_var</dt>
<dd><p>Unique identifier for each document. No default supplied. recommended to use 'universal_message_id' if using a social listening export.</p></dd>


<dt>pos_model</dt>
<dd><p>A UDPipe model imported using <code>limpiar_pos_import_model</code> - must be of class 'udpipe_model'.</p></dd>


<dt>...</dt>
<dd><p>To enable the user to supply any additional arguments to udpipe::udpipe.</p></dd>


<dt>in_parallel</dt>
<dd><p>A logical argument allowing the user to initiate parallel processing to speed the annotate function up. If set to TRUE,  the function will select the number of available cores minus one, processing more efficiently(faster), leaving one core to manage other computations. The default is FALSE.</p></dd>


<dt>dependency_parse</dt>
<dd><p>Whether to perform dependency parsing on tokens. The default is set to FALSE because parsing dependencies takes considerable time and they are not always needed.</p></dd>


<dt>update_progress</dt>
<dd><p>The user has the option to state how often they would like a progress report of the annotation process, posted in the console by stating whether they want a message every 100, 500 or 1000 documents. This is useful when annotating large sets of data and serves as a sanity check to ensure the session hasn't used up all available memory and the annotations have stopped running.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns a data frame with documents broken up into both a token and sentence level, in addition to the existing variables present in <code>data</code> supplied to the function. The returned object contains the parts of speech annotations in CONLL-U formatting, where each row is an annotation of a word. To find out more on the formatting methods, read <a href="https://universaldependencies.org/format.html" class="external-link">here</a>.
The additional arguments with tagged POS information are as follows:</p><ul><li><p>paragraph_id: The identifier indicating the paragraph the annotated token is derived from.</p></li>
<li><p>sentence_id: Similar to paragraph_id but at a sentence level.</p></li>
<li><p>sentence: The sentence the annotated token is derived from.</p></li>
<li><p>token_id: Token index, integer starting at 1 for each new sentence. May be a range for multiword tokens or a decimal number for empty nodes.</p></li>
<li><p>token: The token(or word) being annotated for parts of speech.</p></li>
<li><p>lemma: The lemmatized version of the annotated token.</p></li>
<li><p>pos_tag: The universal parts of speech tag of the token. <a href="https://universaldependencies.org/format.html" class="external-link">Here</a> for more information.</p></li>
<li><p>xpos: The treebank-specific parts of speech tag of the token.</p></li>
<li><p>feats: The morphological features of the token, used for dependency parsing visualisations,.</p></li>
<li><p>head_token_id: Indicating what is the token id of the head of the token, indicating to which other token in the sentence it is related.</p></li>
<li><p>dependency_tag: The information regarding dependency parsing of tokens, displaying the type of relation the token has with the head_token_id. <a href="https://universaldependencies.org/format.html" class="external-link">Here</a> for more information.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The leg work is done by udpipe. We have implemented it into LimpiaR because:</p><ol><li><p>Taking data as its first argument allows it to integrate with Tidyerse workflows (it makes the function pipe-able)</p></li>
<li><p>We want the mental model to be as consistent as possible, i.e. when using LimpiaR in the pre-processing pipeline the user mainly calls LimpiaR, and doesn't have to remember another package.</p></li>
</ol><p>There are many potential workflows so we won't try to enumerate them here. However,  as clear use-cases emerge we will create new limpiar_pos_ functions on a case-by-case basis. An example workflow would be to convert all adjectives and nouns to lemma and then visualise the results.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="va"><a href="https://stringr.tidyverse.org/reference/stringr-data.html" class="external-link">sentences</a></span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>document <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">LimpiaR</span><span class="fu">::</span><span class="fu"><a href="limpiar_pos_import_model.html">limpiar_pos_import_model</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"english"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloading udpipe model from https://raw.githubusercontent.com/jwijffels/udpipe.models.ud.2.5/master/inst/udpipe-ud-2.5-191206/english-ewt-ud-2.5-191206.udpipe to /home/runner/work/_temp/Library/LimpiaR/model_cache/english-ewt-ud-2.5-191206.udpipe</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - This model has been trained on version 2.5 of data from https://universaldependencies.org</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - The model is distributed under the CC-BY-SA-NC license: https://creativecommons.org/licenses/by-nc-sa/4.0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - Visit https://github.com/jwijffels/udpipe.models.ud.2.5 for model license details.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - For a list of all models and their licenses (most models you can download with this package have either a CC-BY-SA or a CC-BY-SA-NC license) read the documentation at ?udpipe_download_model. For building your own models: visit the documentation by typing vignette('udpipe-train', package = 'udpipe')</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloading finished, model stored at '/home/runner/work/_temp/Library/LimpiaR/model_cache/english-ewt-ud-2.5-191206.udpipe'</span>
<span class="r-in"><span><span class="va">annotations</span> <span class="op">&lt;-</span> <span class="fu">limpiar_pos_annotate</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>,</span></span>
<span class="r-in"><span>                                   text_var <span class="op">=</span> <span class="va">text</span>,</span></span>
<span class="r-in"><span>                                   id_var <span class="op">=</span> <span class="va">document</span>,</span></span>
<span class="r-in"><span>                                   pos_model <span class="op">=</span> <span class="va">model</span>,</span></span>
<span class="r-in"><span>                                   in_parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                   dependency_parse <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                                   progress <span class="op">=</span> <span class="st">"100"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2024-05-21 11:54:29.237842 Annotating text fragment 1/100</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jack Penzer, Tim Mooney.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

