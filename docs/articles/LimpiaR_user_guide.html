<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LimpiaR_user_guide • LimpiaR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="LimpiaR_user_guide">
<meta property="og:description" content="LimpiaR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LimpiaR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/LimpiaR_user_guide.html">LimpiaR_user_guide</a>
    </li>
    <li>
      <a href="../articles/Stopwords.html">Stopwords</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="LimpiaR_user_guide_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>LimpiaR_user_guide</h1>
            
      
      
      <div class="hidden name"><code>LimpiaR_user_guide.Rmd</code></div>

    </div>

    
    
<p>First we will load LimpiaR (you will usually want to load tidyverse too, but we do not do so in this Rmarkdown due to package-building complexities)"</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">LimpiaR</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></code></pre></div>
<p>For later reference, we’ve added a table to guide you on which LimpiaR function you will need for our most common outputs/analyses:</p>
<p><img src="limpiar_check_guide.png" width="435"></p>
<p>LimpiaR is a small package built to speed up the data pre-processing and cleaning workflow. Let’s create a very basic example data set to demonstrate a workflow with a mixture of LimpiaR functions and commonly-used text mining packages.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>`Mention Content` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hello, what's your name?"</span>,
                                           <span class="st">"RT LINK BIO BUY NOW"</span>,
                                           <span class="st">"a mi no me gustaría"</span>,
                                           <span class="st">"a mi no me gustaría"</span>,
                                           <span class="st">"a mi no  mé   gustaría"</span>,
                                           <span class="st">"hello, what's your name?"</span>,
                                           <span class="st">"I can't believe this article to be honest https://guardian.com/spampost"</span>, <span class="st">"yo no sé que ha pasado, pero no me gusta por nada"</span><span class="op">)</span><span class="op">)</span>,
                 `Mention Url` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"www.twitter.com/user/post"</span>,
                                       <span class="st">"www.facebook.com/user/post"</span>,
                                       <span class="st">"www.youtube.com/user/post"</span>,
                                       <span class="st">"www.forocoches.com/forum"</span>,
                                       <span class="st">"www.bbc.news.co.uk"</span>,
                                       <span class="st">"www.google.co.uk/images/post_url"</span>,
                                       <span class="st">"www.guardian.com/spam_post"</span>,
                                       <span class="st">"www.twitter.es/spanish_user"</span><span class="op">)</span><span class="op">)</span>,
                 `Super Bad NA Column` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="cleaning-data-frame-names" class="section level2">
<h2 class="hasAnchor">
<a href="#cleaning-data-frame-names" class="anchor"></a>Cleaning Data Frame Names</h2>
<p>The first step is to clean up the column names, generally we want our columns to be all lowercase, with spaces marked by ’_’ (snake case) and no other punctuation. We can dip into the janitor package for a convenient and widely-used function to do this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span> 
  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">original</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="co">#We'll copy our data frame for later use</span>

<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt; [1] "mention_content"     "mention_url"         "super_bad_na_column"</span>
<span class="va">df</span>
<span class="co">#&gt;                                                           mention_content</span>
<span class="co">#&gt; 1                                                Hello, what's your name?</span>
<span class="co">#&gt; 2                                                     RT LINK BIO BUY NOW</span>
<span class="co">#&gt; 3                                                     a mi no me gustaría</span>
<span class="co">#&gt; 4                                                     a mi no me gustaría</span>
<span class="co">#&gt; 5                                                  a mi no  mé   gustaría</span>
<span class="co">#&gt; 6                                                hello, what's your name?</span>
<span class="co">#&gt; 7 I can't believe this article to be honest https://guardian.com/spampost</span>
<span class="co">#&gt; 8                       yo no sé que ha pasado, pero no me gusta por nada</span>
<span class="co">#&gt;                        mention_url super_bad_na_column</span>
<span class="co">#&gt; 1        www.twitter.com/user/post                  NA</span>
<span class="co">#&gt; 2       www.facebook.com/user/post                  NA</span>
<span class="co">#&gt; 3        www.youtube.com/user/post                  NA</span>
<span class="co">#&gt; 4         www.forocoches.com/forum                  NA</span>
<span class="co">#&gt; 5               www.bbc.news.co.uk                  NA</span>
<span class="co">#&gt; 6 www.google.co.uk/images/post_url                   2</span>
<span class="co">#&gt; 7       www.guardian.com/spam_post                   1</span>
<span class="co">#&gt; 8      www.twitter.es/spanish_user                  NA</span></code></pre></div>
<p>Cleaning the names like this every time you start a new project will save you a lot of time in the long run, as you won’t get confused by capitals, and tab completion is much smoother when column names are in snake_case.</p>
</div>
<div id="text-variable---lower-case" class="section level2">
<h2 class="hasAnchor">
<a href="#text-variable---lower-case" class="anchor"></a>Text Variable -&gt; lower case</h2>
<p>In the future you may want to perform some actions on the text variable before doing any pre-processing, but for now we are going to go ahead and put our text variable to lowercase, which is something we want to do for virtually every data set that we analyse. We do this so that strings like “HelLo” aren’t seen as different to “hello” or “HELLO”, which helps us when counting words and bigrams, or modelling topics!</p>
<p>Let’s take a look at the first LimpiaR function. This function will replace accented characters with non-accented, e.g. é becomes e and ñ becomes n. Converting ñ to n has some slightly unwanted effects in that words like año(s) become ano(s). Later on this may become an issue, but for now the trade off is ok. We call limpiar_accents() on the text variable with the help of mutate() and use ‘&lt;-’ to keep the changges.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/limpiar_accents.html">limpiar_accents</a></span><span class="op">(</span>text_var <span class="op">=</span> <span class="va">mention_content</span><span class="op">)</span></code></pre></div>
</div>
<div id="removing-duplicates" class="section level2">
<h2 class="hasAnchor">
<a href="#removing-duplicates" class="anchor"></a>Removing Duplicates</h2>
<p>Next, we’ll remove duplicates and “Deleted or protected mentions” from the text variable. The main reason we remove duplicates is to eradicate spam.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/limpiar_duplicates.html">limpiar_duplicates</a></span><span class="op">(</span><span class="va">mention_content</span><span class="op">)</span>
<span class="va">df</span>
<span class="co">#&gt;                                                           mention_content</span>
<span class="co">#&gt; 1                                                hello, what's your name?</span>
<span class="co">#&gt; 2                                                     rt link bio buy now</span>
<span class="co">#&gt; 3                                                     a mi no me gustaria</span>
<span class="co">#&gt; 4                                                  a mi no  me   gustaria</span>
<span class="co">#&gt; 5 i can't believe this article to be honest https://guardian.com/spampost</span>
<span class="co">#&gt; 6                       yo no se que ha pasado, pero no me gusta por nada</span>
<span class="co">#&gt;                   mention_url super_bad_na_column</span>
<span class="co">#&gt; 1   www.twitter.com/user/post                  NA</span>
<span class="co">#&gt; 2  www.facebook.com/user/post                  NA</span>
<span class="co">#&gt; 3   www.youtube.com/user/post                  NA</span>
<span class="co">#&gt; 4          www.bbc.news.co.uk                  NA</span>
<span class="co">#&gt; 5  www.guardian.com/spam_post                   1</span>
<span class="co">#&gt; 6 www.twitter.es/spanish_user                  NA</span></code></pre></div>
<p>At first glance, it looks like our function may not be working properly, as two seemingly-identical strings remain. However, the tibble output is masking some spaces in one of our ‘a mi no me gustaria’ strings. How could we see that?</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">mention_content</span><span class="op">)</span>
<span class="co">#&gt; [1] "hello, what's your name?"                                               </span>
<span class="co">#&gt; [2] "rt link bio buy now"                                                    </span>
<span class="co">#&gt; [3] "a mi no me gustaria"                                                    </span>
<span class="co">#&gt; [4] "a mi no  me   gustaria"                                                 </span>
<span class="co">#&gt; [5] "i can't believe this article to be honest https://guardian.com/spampost"</span>
<span class="co">#&gt; [6] "yo no se que ha pasado, pero no me gusta por nada"</span></code></pre></div>
<p>So, we could use another LimpiaR function to remove the excess whitespaces and try again:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/limpiar_spaces.html">limpiar_spaces</a></span><span class="op">(</span><span class="va">mention_content</span><span class="op">)</span><span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/limpiar_duplicates.html">limpiar_duplicates</a></span><span class="op">(</span><span class="va">mention_content</span><span class="op">)</span>

<span class="va">df</span>
<span class="co">#&gt;                                                           mention_content</span>
<span class="co">#&gt; 1                                                hello, what's your name?</span>
<span class="co">#&gt; 2                                                     rt link bio buy now</span>
<span class="co">#&gt; 3                                                     a mi no me gustaria</span>
<span class="co">#&gt; 4 i can't believe this article to be honest https://guardian.com/spampost</span>
<span class="co">#&gt; 5                       yo no se que ha pasado, pero no me gusta por nada</span>
<span class="co">#&gt;                   mention_url super_bad_na_column</span>
<span class="co">#&gt; 1   www.twitter.com/user/post                  NA</span>
<span class="co">#&gt; 2  www.facebook.com/user/post                  NA</span>
<span class="co">#&gt; 3   www.youtube.com/user/post                  NA</span>
<span class="co">#&gt; 4  www.guardian.com/spam_post                   1</span>
<span class="co">#&gt; 5 www.twitter.es/spanish_user                  NA</span></code></pre></div>
</div>
<div id="removing-retweets" class="section level2">
<h2 class="hasAnchor">
<a href="#removing-retweets" class="anchor"></a>Removing Retweets</h2>
<p>Now our function seems to be working as expected. We can see that one of the posts begins with ‘rt’ which indicates that it is a retweet, often we will want to remove all retweets, so let’s call another LimpiaR function: limpiar_retweets, on our data frame.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/limpiar_retweets.html">limpiar_retweets</a></span><span class="op">(</span><span class="va">mention_content</span><span class="op">)</span>
<span class="va">df</span>
<span class="co">#&gt;                                                           mention_content</span>
<span class="co">#&gt; 1                                                hello, what's your name?</span>
<span class="co">#&gt; 2                                                     a mi no me gustaria</span>
<span class="co">#&gt; 3 i can't believe this article to be honest https://guardian.com/spampost</span>
<span class="co">#&gt; 4                       yo no se que ha pasado, pero no me gusta por nada</span>
<span class="co">#&gt;                   mention_url super_bad_na_column</span>
<span class="co">#&gt; 1   www.twitter.com/user/post                  NA</span>
<span class="co">#&gt; 2   www.youtube.com/user/post                  NA</span>
<span class="co">#&gt; 3  www.guardian.com/spam_post                   1</span>
<span class="co">#&gt; 4 www.twitter.es/spanish_user                  NA</span></code></pre></div>
<p>The decision to remove retweets or not should be made on a case-by-case basis. If you leave retweets in, they will dominate topic models &amp; bigram networks. However, they are an indicator of viral events, which may be important for some analyses.</p>
<p><em>If you decide to remove retweets, you can use the original data frame to analyse them</em></p>
</div>
<div id="removing-urls" class="section level2">
<h2 class="hasAnchor">
<a href="#removing-urls" class="anchor"></a>Removing URLs</h2>
<p>Our data frame is getting pretty small, but in our larger data frames we often see the same URLs posted by many accounts or bots. We don’t want our bigram networks, token charts or topic models to be filled with URLs. We will use another function: limpiar_url to remove URLs from our text variable:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/limpiar_url.html">limpiar_url</a></span><span class="op">(</span><span class="va">mention_content</span><span class="op">)</span>
<span class="va">df</span>
<span class="co">#&gt;                                     mention_content                 mention_url</span>
<span class="co">#&gt; 1                          hello, what's your name?   www.twitter.com/user/post</span>
<span class="co">#&gt; 2                               a mi no me gustaria   www.youtube.com/user/post</span>
<span class="co">#&gt; 3        i can't believe this article to be honest   www.guardian.com/spam_post</span>
<span class="co">#&gt; 4 yo no se que ha pasado, pero no me gusta por nada www.twitter.es/spanish_user</span>
<span class="co">#&gt;   super_bad_na_column</span>
<span class="co">#&gt; 1                  NA</span>
<span class="co">#&gt; 2                  NA</span>
<span class="co">#&gt; 3                   1</span>
<span class="co">#&gt; 4                  NA</span></code></pre></div>
</div>
<div id="inspectinginvestigating-a-specific-pattern" class="section level2">
<h2 class="hasAnchor">
<a href="#inspectinginvestigating-a-specific-pattern" class="anchor"></a>Inspecting/Investigating a Specific Pattern</h2>
<p>When working with larger data sets, we might want to inspect all of the posts which feature a certain pattern, to then copy the URL and take a screenshot, or examine for traces of spam. The limpiar_inspect function ouputs an inspectable data frame with just the text variable and the URL column for ease of inspection:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/limpiar_inspect.html">limpiar_inspect</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"article"</span>, <span class="va">mention_content</span>, <span class="va">mention_url</span><span class="op">)</span></code></pre></div>
<p>Personally I use limpiar_inspect heavily when I need to check the output of a bigram network.</p>
</div>
<div id="removing-na-heavy-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#removing-na-heavy-columns" class="anchor"></a>Removing NA-heavy Columns</h2>
<p>You may have noticed that our data frame has a column which is filled with NA values, when dealing with small data sets, this is no issue. However, in large data sets (particularly when using RStudio) conserving memory is helpful. Reducing the dimensions of the data frame can also help us to put less strain on our working memories - as we can see more of the columns at once (underrated efficiency gain!).</p>
<p>The next LimpiaR function allows you to reduce the columns of your data frame, by selecting a threshold of non-NA values a column must surpass to be retained. If the threshold is 0.1, a column must have 10% or more values which are not NA, which is another way of saying it must have fewer than 90% NA values. If we set the threshold to 0.4, we would be asking R to retain the columns with 40% or more non-NA values, so fewer than 60% NA values.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/limpiar_na_cols.html">limpiar_na_cols</a></span><span class="op">(</span><span class="va">df</span>, <span class="fl">0.4</span><span class="op">)</span>
<span class="va">df</span>
<span class="co">#&gt;                                     mention_content                 mention_url</span>
<span class="co">#&gt; 1                          hello, what's your name?   www.twitter.com/user/post</span>
<span class="co">#&gt; 2                               a mi no me gustaria   www.youtube.com/user/post</span>
<span class="co">#&gt; 3        i can't believe this article to be honest   www.guardian.com/spam_post</span>
<span class="co">#&gt; 4 yo no se que ha pasado, pero no me gusta por nada www.twitter.es/spanish_user</span></code></pre></div>
<p>We see that the NA-heavy column is deleted. What happens if we change the threshold to 0.2? Asking R to get rid of all columns that have 80% or more Would we expect to have 3 columns or 2?</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/limpiar_na_cols.html">limpiar_na_cols</a></span><span class="op">(</span><span class="va">original</span>, <span class="fl">0.2</span><span class="op">)</span>
<span class="co">#&gt;                                                           mention_content</span>
<span class="co">#&gt; 1                                                Hello, what's your name?</span>
<span class="co">#&gt; 2                                                     RT LINK BIO BUY NOW</span>
<span class="co">#&gt; 3                                                     a mi no me gustaría</span>
<span class="co">#&gt; 4                                                     a mi no me gustaría</span>
<span class="co">#&gt; 5                                                  a mi no  mé   gustaría</span>
<span class="co">#&gt; 6                                                hello, what's your name?</span>
<span class="co">#&gt; 7 I can't believe this article to be honest https://guardian.com/spampost</span>
<span class="co">#&gt; 8                       yo no sé que ha pasado, pero no me gusta por nada</span>
<span class="co">#&gt;                        mention_url super_bad_na_column</span>
<span class="co">#&gt; 1        www.twitter.com/user/post                  NA</span>
<span class="co">#&gt; 2       www.facebook.com/user/post                  NA</span>
<span class="co">#&gt; 3        www.youtube.com/user/post                  NA</span>
<span class="co">#&gt; 4         www.forocoches.com/forum                  NA</span>
<span class="co">#&gt; 5               www.bbc.news.co.uk                  NA</span>
<span class="co">#&gt; 6 www.google.co.uk/images/post_url                   2</span>
<span class="co">#&gt; 7       www.guardian.com/spam_post                   1</span>
<span class="co">#&gt; 8      www.twitter.es/spanish_user                  NA</span></code></pre></div>
</div>
<div id="combining-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-functions" class="anchor"></a>Combining Functions</h2>
<p>We’ve now seen the majority of the first-release LimpiaR functions. Often they will need to be used separately , but sometimes we will want to use a few of them together in one big function call. The final function we will look at, limpiar_df, effectively does this, as well as allowing for the removal of punctuation. However, removing punctuation is not a given and should be removed only if there is a valid reason for doing so.</p>
<p>limpiar_df can: remove empty rows transform the text variable to lower case replace accented characters with non-accented equivalents remove URLs remove retweets remove punctuation clean excess whitespace remove duplicates (after all of the preceding elements have been carried out)</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/limpiar_df.html">limpiar_df</a></span><span class="op">(</span><span class="va">original</span>, <span class="va">mention_content</span>, remove_retweets <span class="op">=</span> <span class="cn">FALSE</span>, remove_punctuation <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>We could also decide to remove retweets and punctuation:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/limpiar_df.html">limpiar_df</a></span><span class="op">(</span><span class="va">original</span>, <span class="va">mention_content</span>, remove_retweets <span class="op">=</span> <span class="cn">TRUE</span>, remove_punctuation <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Using limpiar_df won’t always be the correct answer, but once you understand what each function in LimpiaR does, you will be able to make an educated guess and use limpiar_df to drastically speed up your analyses.</p>
<p>Next time we will be looking at LimpiaR’s stop words dictionary, creating your own stop words lists and how to remove them from the text, a vital step in most text mining projects.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jack Penzer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
