<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LimpiaR X Parts of Speech Workflow • LimpiaR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="LimpiaR X Parts of Speech Workflow">
<meta property="og:description" content="LimpiaR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LimpiaR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/limpiar_intro.html">Introduction to LimpiaR</a>
    </li>
    <li>
      <a href="../articles/parts_of_speech_workflow.html">LimpiaR X Parts of Speech Workflow</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jpcompartir/LimpiaR" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="parts_of_speech_workflow_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="parts_of_speech_workflow_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="parts_of_speech_workflow_files/datatables-binding-0.31/datatables.js"></script><link href="parts_of_speech_workflow_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="parts_of_speech_workflow_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="parts_of_speech_workflow_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="parts_of_speech_workflow_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="parts_of_speech_workflow_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>LimpiaR X Parts of Speech Workflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jpcompartir/LimpiaR/tree/mainvignettes/parts_of_speech_workflow.Rmd" class="external-link"><code>vignettes/parts_of_speech_workflow.Rmd</code></a></small>
      <div class="hidden name"><code>parts_of_speech_workflow.Rmd</code></div>

    </div>

    
    
<p>In this vignette we’ll be looking at how to use LimpiaR to process a
text variable for its parts of speech via {udpipe}. For a primer on
parts of speech see <a href="https://en.wikipedia.org/wiki/Part_of_speech" class="external-link">Parts of Speech
Wikipedia</a></p>
<p>The main motivation for processing and extraction parts of speech is
to home in on the particular aspects of language which are most
informative for answering a given research question. For example, if you
want to know what people think about something, you might focus on
adjectives and nouns. If you want to know how people are using
something, you might focus more on verbs/phrasal verbs.</p>
<p>Before we start, we must ensure that we have the necessary libraries
installed and loaded, including LimpiaR, and a few others for data
wrangling purposes.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">LimpiaR</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span></code></pre></div>
<p>LimpiaR’s Parts of Speech(POS) workflow leans on existing
functionality of {udpipe} and allow for users to import one of their
existing trained models for parts of speech analysis, to later annotate
texts by tokenizing(breaking sentences up into words) and also enabling
users to perform dependency parsing on tokens, ‘a technique which
provides to each word in a sentence the link to another word in the
sentence, which is called its syntactical head. This link between each 2
words furthermore has a certain type of relationship giving you further
details about it’, see <a href="https://www.r-bloggers.com/2019/07/dependency-parsing-with-udpipe/" class="external-link">here</a>
for more.</p>
<p>First, we must select what model it is that that we want to download.
UDPipe pre-trained models are built upon Universal Dependencies
treebanks and are made available for more than 65 languages based on 101
treebanks. For the purpose of this documentation, we will select the
‘english’ model, and we can do so using the
<code><a href="../reference/limpiar_pos_import_model.html">limpiar_pos_import_model()</a></code> function and supplying its only
argument, <code>language</code> with the desired model.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/limpiar_pos_import_model.html">limpiar_pos_import_model</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"english"</span><span class="op">)</span></span></code></pre></div>
<p>Now we have our model imported into our session, lets load some data
for us to annotate. Using the data object derived from the {stringr}
package and containing sentences ideal for tagging, tokenizing,
lemmatizing and parsing for parts of speech analysis, for this example
we will mutate columns; document and universal_message_id. These two
columns will serve as likely variables within the users data-set in a
real-world situation or project.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="va"><a href="https://stringr.tidyverse.org/reference/stringr-data.html" class="external-link">sentences</a></span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">]</span><span class="op">)</span>, document <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>universal_message_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"TWITTER"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now we have our data and we should have our loaded model, we can
begin annotating with the <code><a href="../reference/limpiar_pos_annotate.html">limpiar_pos_annotate()</a></code>
function.</p>
<p>It’s worth noting that the output can entirely depend on any cleaning
steps performed on texts before annotating. For example, it is possible
that with the removal of punctuation, the dependency parsing bits of the
function may under-perform. This could also be said for the Parts of
Speech(POS) tagging process as nouns(PRON) and proper-nouns(PROPN) will
be harder to differentiate if punctuation is removed as well as all text
being lowercase.</p>
<p>When using LimpiaR’s annotate function we first tokenize all
sentences of our text variable(text_var) within a selected data frame
object(data), enabling us to perform POS tagging and lemmatization on
tokens. We can also speed this process up by calling <code>TRUE</code>
on the parallel processing argument(in_parallel). The user can also
decide whether to parse tokens for term dependencies, by supplying the
parse_text argument with a logical input of <code>TRUE</code>, but is
<code>FALSE</code> by default as this step can be expensive on compute
and memory if performed on large sets of data unnecessarily or
unwillingly. When using <code><a href="../reference/limpiar_pos_annotate.html">limpiar_pos_annotate()</a></code> its
important to supply the id_var with an appropriate identifying variable.
This can either be; universal_message_id, doc_id, doc_number or anything
similar that represents a unique document of text which the annotations
are then performed upon.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">annotations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/limpiar_pos_annotate.html">limpiar_pos_annotate</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, text_var <span class="op">=</span> <span class="va">text</span>, id_var <span class="op">=</span> <span class="va">universal_message_id</span>, pos_model <span class="op">=</span> <span class="va">model</span>,parse_text <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Performing dependency parsing on tokens...</span></span></code></pre>
<pre><code><span><span class="co">## Parts of speech tagging in process...</span></span></code></pre>
<p>Now that we have our texts tokenized, parsed and POS annotations are
complete. Lets take a look at the output in a data table.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">annotations</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="op">)</span> </span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-b40c589dc3aa015946a9" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b40c589dc3aa015946a9">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],["the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","the juice of lemons makes fine punch.","the juice of lemons makes fine punch.","the juice of lemons makes fine punch."],["1","2","3","4","5","6","7","8","9","1","2","3","4","5","6","7","8","9","1","2","3","4","5","6","7","8","9","10","11","1","2","3","4","5","6","7","8","9","10","1","2","3","4","5","6","7","8","1","2","3"],["the","birch","canoe","slid","on","the","smooth","planks",".","glue","the","sheet","to","the","dark","blue","background",".","it","'s","easy","to","tell","the","depth","of","a","well",".","these","days","a","chicken","leg","is","a","rare","dish",".","rice","is","often","served","in","round","bowls",".","the","juice","of"],["the","birch","canoe","slid","on","the","smooth","plank",".","glue","the","sheet","to","the","dark","blue","background",".","it","be","easy","to","tell","the","depth","of","a","well",".","these","day","a","chicken","leg","be","a","rare","dish",".","rice","be","often","serve","in","round","bowls",".","the","juice","of"],["DET","NOUN","NOUN","NOUN","ADP","DET","ADJ","NOUN","PUNCT","VERB","DET","NOUN","ADP","DET","ADJ","ADJ","NOUN","PUNCT","PRON","AUX","ADJ","PART","VERB","DET","NOUN","ADP","DET","ADV","PUNCT","DET","NOUN","DET","NOUN","NOUN","AUX","DET","ADJ","NOUN","PUNCT","NOUN","AUX","ADV","VERB","ADP","ADJ","NOUN","PUNCT","DET","NOUN","ADP"],["DT","NN","NN","NN","IN","DT","JJ","NNS",".","VB","DT","NN","IN","DT","JJ","JJ","NN",".","PRP","VBZ","JJ","TO","VB","DT","NN","IN","DT","RB",".","DT","NNS","DT","NN","NN","VBZ","DT","JJ","NN",".","NN","VBZ","RB","VBN","IN","JJ","NNS",".","DT","NN","IN"],["Definite=Def|PronType=Art","Number=Sing","Number=Sing","Number=Sing",null,"Definite=Def|PronType=Art","Degree=Pos","Number=Plur",null,"Mood=Imp|VerbForm=Fin","Definite=Def|PronType=Art","Number=Sing",null,"Definite=Def|PronType=Art","Degree=Pos","Degree=Pos","Number=Sing",null,"Case=Nom|Gender=Neut|Number=Sing|Person=3|PronType=Prs","Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin","Degree=Pos",null,"VerbForm=Inf","Definite=Def|PronType=Art","Number=Sing",null,"Definite=Ind|PronType=Art","Degree=Pos",null,"Number=Plur|PronType=Dem","Number=Plur","Definite=Ind|PronType=Art","Number=Sing","Number=Sing","Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin","Definite=Ind|PronType=Art","Degree=Pos","Number=Sing",null,"Number=Sing","Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin",null,"Tense=Past|VerbForm=Part|Voice=Pass",null,"Degree=Pos","Number=Plur",null,"Definite=Def|PronType=Art","Number=Sing",null],["4","3","4","0","8","8","8","4","4","0","3","1","8","8","8","8","1","1","3","3","0","5","3","7","5","10","10","7","3","2","0","5","5","9","9","9","9","2","2","4","4","4","0","7","7","4","4","2","5","4"],["det","compound","compound","root","case","det","amod","nmod","punct","root","det","obj","case","det","amod","amod","obl","punct","expl","cop","root","mark","csubj","det","obj","case","det","nmod","punct","det","root","det","compound","nsubj","cop","det","amod","acl:relcl","punct","nsubj:pass","aux:pass","advmod","root","case","amod","obl","punct","det","nsubj","case"],["TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER978","TWITTER978","TWITTER978"],["the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","the birch canoe slid on the smooth planks.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","glue the sheet to the dark blue background.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","it's easy to tell the depth of a well.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","these days a chicken leg is a rare dish.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","rice is often served in round bowls.","the juice of lemons makes fine punch.","the juice of lemons makes fine punch.","the juice of lemons makes fine punch."],[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,6,6,6],["TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER270","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER328","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER335","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER418","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER972","TWITTER978","TWITTER978","TWITTER978"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>paragraph_id<\/th>\n      <th>sentence_id<\/th>\n      <th>sentence<\/th>\n      <th>token_id<\/th>\n      <th>token<\/th>\n      <th>lemma<\/th>\n      <th>pos_tag<\/th>\n      <th>xpos<\/th>\n      <th>feats<\/th>\n      <th>head_token_id<\/th>\n      <th>dependency_tag<\/th>\n      <th>id_var<\/th>\n      <th>text<\/th>\n      <th>document<\/th>\n      <th>universal_message_id<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,14]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"paragraph_id","targets":1},{"name":"sentence_id","targets":2},{"name":"sentence","targets":3},{"name":"token_id","targets":4},{"name":"token","targets":5},{"name":"lemma","targets":6},{"name":"pos_tag","targets":7},{"name":"xpos","targets":8},{"name":"feats","targets":9},{"name":"head_token_id","targets":10},{"name":"dependency_tag","targets":11},{"name":"id_var","targets":12},{"name":"text","targets":13},{"name":"document","targets":14},{"name":"universal_message_id","targets":15}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>Our first observation might be that the data frame output is
significantly larger than the one we provided in terms of row number.
This is due to each row now representing an annotation of each token
derived from sentences belonging to documents. We can also see some
additional columns containing information regarding each annotation, the
columns we will pay closer attention to are; paragraph_id, sentence_id,
sentence, token, lemma, pos_tag, dependency_tag and id_var all of which
can be useful in a number of NLP objectives.</p>
<p>First, we must understand what they all mean. Starting with
<code>paragraph_id</code> and <code>sentence_id</code>, we see the
identifying value for both the sentence in which the annotated token is
derived, as well as the paragraph. As our example data consists of
sentences its likely that the values here for paragraph_id and
sentence_id will be an equal match given that no document consists of
more than one sentence. We then of course, have the
<code>sentence</code> in question along with the <code>token</code>
being annotated along with its respective <code>lemma</code>(the token
in its root form), understanding the lemma column can be best visualized
when looking at row number 43 where ‘served’ of document 5 becomes
‘serve’ once lemmatized.</p>
<p>We then see <code>pos_tag</code>, <code>head_token_id</code>,
<code>dependency_tag</code> and <code>id_var</code>. Starting with
pos_tag(or Parts of Speech tag), this column is where information
regarding how tokens are classified as any of the parts of speech labels
such as; Noun(NOUN), Proper Noun(PROPN), Pronoun(PRON), Verb(VERB),
Adjective(ADJ) etc. For more on the exact tags and what they mean see <a href="https://universaldependencies.org/u/pos/index.html" class="external-link">here</a>. We
then have columns; <code>head_token_id</code> and
<code>dependency_tag</code> which along with a few other columns, we
will need if we wish to conduct dependency parsing analysis on our
documents and visualize those. If the user calls parse_text = FALSE,
then dependency tags will show as NA. These two columns are important
and are closely linked as dependency_tag shows the relationship the
annotated token has with the head_token_id. Finally, the finally and
quite possibly the most important column; <code>id_var</code>, this is
the id_var that the users inputs when calling the annotate function and
is necessary to join the original data back to the annotations
throughout the process. If not supplied, the function will not run.</p>
<p>Now that we have a bit more context as to what all of this
information means, lets dive in and see if we can manipulate this data
so we can see what adjectives are most common in their lemmatized form.
To do so, we only require some basic {dplyr} functionality and we will
use <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> from {utils} package to select only the top 10
most frequent.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">annotations</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">pos_tag</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ADJ"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="co"># select which parts of speech we want to inspect</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span>.by <span class="op">=</span> <span class="va">lemma</span>, <span class="va">lemma</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-47ce837b195dddbc798e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-47ce837b195dddbc798e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["old","high","fine","hot","new","small","strong","good","green","young"],["old","high","fine","hot","new","small","strong","good","green","young"],[12,11,10,10,10,10,10,9,9,9]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.by<\/th>\n      <th>lemma<\/th>\n      <th>n<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":".by","targets":1},{"name":"lemma","targets":2},{"name":"n","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>So here, we can see that ‘old’ is the most frequent adjective
followed by adjectives such as ‘high’, ‘fine’ and others within our text
documents. Now lets look at frequent nouns.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">annotations</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">pos_tag</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NOUN"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># this time selecting nouns</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span>.by <span class="op">=</span> <span class="va">lemma</span>, <span class="va">lemma</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-3807a3bb028b4d55cd4b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3807a3bb028b4d55cd4b">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["man","day","wall","water","way","child","side","time","book","box"],["man","day","wall","water","way","child","side","time","book","box"],[14,10,10,10,10,9,9,8,7,7]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.by<\/th>\n      <th>lemma<\/th>\n      <th>n<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":".by","targets":1},{"name":"lemma","targets":2},{"name":"n","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>Okay, so we can see that ‘man’ is the most used noun within the data
set. This paired with the adjective counts, can start to tell a story
about whats in the data and how these parts of speech are distributed
across our documents.</p>
<p>So we’ve observed ‘old’ as the most frequent adjective and ‘man’ as
the most used noun, this isn’t to say that a majority of posts are
consistent of the term ‘old man’, but if we wanted to investigate
adjective and noun relationships we can so do by calculating these
co-occurrences within documents using
<code><a href="https://rdrr.io/pkg/udpipe/man/cooccurrence.html" class="external-link">udpipe::cooccurrence()</a></code>.</p>
<div class="section level3">
<h3 id="the-following-section-needs-to-be-revisited-and-most-of-it-likely-removed-or-edited-need-to-think-how-to-do-the-same-thing-differently">The following section needs to be revisited and most of it likely
removed or edited, need to think how to do the same thing
differently…<a class="anchor" aria-label="anchor" href="#the-following-section-needs-to-be-revisited-and-most-of-it-likely-removed-or-edited-need-to-think-how-to-do-the-same-thing-differently"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co_occurrences</span> <span class="op">&lt;-</span> <span class="fu">udpipe</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/udpipe/man/cooccurrence.html" class="external-link">cooccurrence</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">annotations</span>, <span class="va">pos_tag</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NOUN"</span>, <span class="st">"ADJ"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                       term <span class="op">=</span> <span class="st">"lemma"</span>,</span>
<span>                                       group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"paragraph_id"</span>, <span class="st">"sentence_id"</span>, <span class="st">"id_var"</span>, <span class="st">"document"</span>, <span class="st">"universal_message_id"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">co_occurrences</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   term1  term2 cooc</span></span>
<span><span class="co">## 1   hot    sun    3</span></span>
<span><span class="co">## 2 brass bright    2</span></span>
<span><span class="co">## 3  cool  grass    2</span></span>
<span><span class="co">## 4 flame   heat    2</span></span>
<span><span class="co">## 5   bun    hot    2</span></span>
<span><span class="co">## 6  many   name    2</span></span></code></pre>
<p>We then have the option to visualize these byway of looking at the
co-occurrences both in the same document as well as those that follow
one another. For example, lets take a look at the co-occurrences within
documents.</p>
<p><img src="parts_of_speech_workflow_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>The above visualization is rather fragmented but this is a result of
having sentence data such as this one where documents aren’t consistent
of multiple nouns and adjectives. Finally, lets look at the nouns and
adjectives that follow one another.</p>
<pre><code><span><span class="co">##   term1 term2 cooc</span></span>
<span><span class="co">## 1   hot   sun    3</span></span>
<span><span class="co">## 2  tall rider    2</span></span>
<span><span class="co">## 3 third  week    2</span></span>
<span><span class="co">## 4  cool grass    2</span></span>
<span><span class="co">## 5  high  wind    2</span></span>
<span><span class="co">## 6  gold  ring    2</span></span></code></pre>
<p><img src="parts_of_speech_workflow_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>We see that ‘hot sun’ remains most frequent with a count of 3
occurrences throughout our documents.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jack Penzer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
